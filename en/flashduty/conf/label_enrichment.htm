<!doctypehtml><meta charset=UTF-8><link rel="alternate" type="application/rss+xml" hreflang="en" href="/en.rss"><link rel=stylesheet href=//registry.npmmirror.com/18x/latest/files/_.css><script src=//registry.npmmirror.com/18x/latest/files/seo.js></script><link rel=alternate href="https://doc.flashduty.com/flashduty/conf/label_enrichment" hreflang=x-default><link rel=canonical href="https://doc.flashduty.com/flashduty/conf/label_enrichment"><link rel=stylesheet href=//registry.npmmirror.com/18x/latest/files/seo.css><link rel=alternate hreflang=en href="https://doc.flashduty.com/en/flashduty/conf/label_enrichment.htm"><link rel=alternate hreflang=zh href="https://doc.flashduty.com/zh/flashduty/conf/label_enrichment.htm"><title>Configuring Tag Enhancements</title><main><article><hr /><h2>brief: What Tags Do and How to Configure Tag Enhancements</h2><h1>Configuring Tag Enhancements</h1><p>In the FlashDuty incident details, the incident tags are displayed in the form of key:value, presenting various source data information of the alert. These tag details come from various alert events integrated into FlashDuty. <strong>When the tags automatically generated by the system based on source data do not meet business needs, you can use tag enhancements to enrich the alert with more tag information</strong>, thereby improving incident handling efficiency.</p><h2>Purpose of Tags</h2><p>In FlashDuty, tags are the basic data model for alert events and incident handling. Tags have a wide range of uses, and their core purposes include but are not limited to:</p><ul><li><strong>Incident List:</strong> The incident list now supports quick filtering by tags, allowing users to centrally view and manage all incident records with the same tags, enhancing the efficiency and relevance of incident handling</li><li><strong>Configure Routing:</strong> When matching collaboration spaces according to routing rules, you can use tags as conditions to route events with the same tags to one or more collaboration spaces</li><li><strong>Exclusion Rules:</strong> When specific alerts do not need to be received, you can match them based on tags in the exclusion rules</li><li><strong>Dispatch Notifications:</strong> Tags can be used in dispatch conditions to achieve more precise and flexible notification distribution strategies</li><li><strong>Alert Aggregation:</strong> By intelligently using the same or different tags as dimensions in the aggregation process, we can effectively classify and reduce noise in alert events, improving the clarity and handling efficiency of incidents</li><li><strong>Silence Rules:</strong> Tags can be included in the silence condition configuration as a basis for judgment, accurately filtering and silencing alerts associated with specific tags, thereby achieving advanced customization and noise control in alert management</li><li><strong>Suppression Rules:</strong> Introducing tags as key conditions enables suppression rules to more accurately identify and block alerts that meet the conditions (including specific tag matches), optimizing alert system efficiency and reducing false positive interference</li><li><strong>Tag Enhancements:</strong> The tag enhancement feature allows new tags to be automatically extracted or derived from existing source tags during the configuration process, optimizing and refining the tag structure, and further enhancing the flexibility and intelligence of resource classification and management</li></ul><h2>Configuring Tag Enhancements</h2><p>Each alert event in the integration center has a tag enhancement configuration option. Tag enhancements can be configured after the alert event is created</p><h3>Types of Tag Enhancements</h3><ul><li><strong>Extraction:</strong> You can use regular expressions to extract the required information from the alert title, detailed description, and existing tag fields, and automatically generate additional tags.</li><li><strong>Combination:</strong> Combination rules can construct new tags using Go language template syntax, extracting tag values in the format {{.Labels.Field}} or generating new tags using fixed values.</li><li><strong>Mapping:</strong> This involves generating new key-value pairs from the source key values in the system through mapping relationships. You need to <a href="https://developer.flashcat.cloud/api-142409927">create a schema</a> and <a href="https://developer.flashcat.cloud/api-145679479">upload metadata</a> in advance to configure this. For specific configuration, refer to the configuration examples below.</li><li><strong>Deletion:</strong> Delete the tag with the specified name. If the tag to be deleted does not exist, the operation will be invalid.</li></ul><p><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/1.avif" alt="" /></p><h3>Configuration Instructions</h3><ul><li><p><strong>Restrictions:</strong> When performing tag enhancements, you can configure precondition rules to restrict whether corresponding tags are generated or deleted (off by default). When restrictions are in place, tags will not be generated or deleted if the conditions are not met. You can go to <a href="/conf/how_to_filter">Configure Filter Conditions</a> to learn how to configure restrictions.</p></li><li><p><strong>Overwrite:</strong> When generating a new tag based on set conditions, you can choose whether to overwrite the original tag (off by default). For example, a new tag named host with a value of A is generated according to the rules. If the tag host already exists in the original alert , it will be overwritten. Original label.</p></li><li><p><strong>Preview:</strong> After configuring the rules, you can preview the results to visually observe the effect of the rule configuration.</p></li></ul><p><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/2.avif" alt="" /></p><blockquote><p>[!NOTE]
Multiple tag rules can be configured. If there are multiple rules, they will be executed in order from top to bottom. When any of the rules does not match, the corresponding tag will not be generated/deleted, and there will be no prompt message.</p></blockquote><h2>Configuration Examples</h2><h3>1. <strong>Tag Extraction</strong></h3><p><strong>Scenario:</strong> The alert event comes from email integration, and key information needs to be extracted from the description to be used as tags in other scenarios, such as extracting the IP and trigger value from the description as independent tags.</p><h4>1.1 Alert Original Text</h4><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/3.avif" style="display: block; margin: 0 auto;" width="500"><h4>1.2 Extraction Rules</h4><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/4.avif" style="display: block; margin: 0 auto;"  width="500"><h4>1.3 Extraction Effect</h4><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/5.avif" style="display: block; margin: 0 auto;" width="500"><h3>2. <strong>Tag Combination</strong></h3><p><strong>Scenario:</strong> The company's log platform can directly access log details through the domain name + event ID + timestamp, but the alert information only contains the event ID and timestamp tags. Therefore, you need to combine this information into an access URL.</p><h4>2.1 Alert Original Text</h4><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/6.avif" style="display: block; margin: 0 auto;" width="500"><h4>2.2 Combination Rules</h4><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/7.avif" style="display: block; margin: 0 auto;" width="500"><h4>2.3 Combination Effect</h4><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/8.avif" style="display: block; margin: 0 auto;" width="500"><h3>3. <strong>Tag Mapping</strong></h3><p><strong>Scenario:</strong> When the tag values in the source alert information are not fixed and their meanings cannot be intuitively determined, you can use mapping to map the source tags to new defined tags and values. For example, if the source alert only contains resource type ID information, but you want to reflect the corresponding resource type names for each ID, this can be achieved through mapping.</p><h4>3.1 Create Schema Mapping Relationship</h4><p>The source alert information only contains the resource type ID and the alert level represented by numbers. The required mapping tags are: ID-&gt;Type , Level-&gt;DLevel .</p><table><thead><tr><th align="center">Source Tag 01</th><th align="center">Target Tag 01</th><th align="center">Source Tag 02</th><th align="center">Target Tag 02</th></tr></thead><tbody><tr><td align="center">ID</td><td align="center">Type</td><td align="center">Level</td><td align="center">Dlevel</td></tr></tbody></table><p>Create schema source_labels and result_labels parameters represent the source tag and target tag names respectively ( <a href="https://developer.flashcat.cloud/api-142409927">more creation methods</a> )</p><pre><code>curl --location --request POST 'https://api.flashcat.cloud/enrichment/mapping/schema/create?app_key={}' \
--header 'User-Agent: Apifox/1.0.0 (https://apifox.com)' \
--header 'Content-Type: application/json' \
--data-raw '{
&quot;schema_name&quot;: &quot;zabbix mapping&quot;,
&quot;description&quot;: &quot;Mapping test&quot;,
&quot;source_labels&quot;: [
&quot;ID&quot;,
&quot;Level&quot;
],
&quot;result_labels&quot;: [
&quot;Type&quot;,
&quot;Dlevel&quot;
]
}'

</code></pre><h4>3.2 Upload Mapping Table (Requires CSV Format)</h4><table><thead><tr><th align="center">ID</th><th align="center">Type</th><th align="center">Level</th><th align="center">Dlevel</th></tr></thead><tbody><tr><td align="center">A</td><td align="center">server</td><td align="center">1</td><td align="center">Stop Service</td></tr><tr><td align="center">B</td><td align="center">router</td><td align="center">2</td><td align="center">Danger</td></tr><tr><td align="center">C</td><td align="center">gateway</td><td align="center">3</td><td align="center">Average</td></tr><tr><td align="center">D</td><td align="center">database</td><td align="center">4</td><td align="center">Notice</td></tr><tr><td align="center">E</td><td align="center">MQ</td><td align="center">5</td><td align="center">Disaster</td></tr></tbody></table><pre><code>curl --location --request POST 'https://api.flashcat.cloud/enrichment/mapping/data/upload?schema_id={}&amp;app_key={}' \
--header 'User-Agent: Apifox/1.0.0 (https://apifox.com)' \
--header 'Content-Type: multipart/form-data' \
--form 'file=@&quot;./test.csv&quot;'

</code></pre><h4>3.3 Configure Mapping Relationship</h4><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/9.avif" style="display: block; margin: 0 auto;"  width="500"><h5>3.3.1 Alert Original Text</h5><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/10.avif" style="display: block; margin: 0 auto;" width="500"><h5>3.3.2 Mapping Effect</h5><img src="https://fc.3ti.site/zh/flashduty/conf/label_enrichment/11.avif" style="display: block; margin: 0 auto;" width="500"><blockquote><p>[!NOTE]
If you do not want the source tag to still exist, you can use the deletion rule to remove it.</p></blockquote></article><nav><a href="/">doc.flashduty.com</a><a href="/en/flashduty">FlashDuty: One-Stop Alert Response Platform</a></nav><footer><div id="Ft"><b><a class="site" href="//flashcat.cloud"></a><b>© FlashCat Cloud</b><b>Site Build By <a class="a" href="https://i18n.site">I18N.SITE</a></b></b><b><a href="//github.com/flashcatcloud">&#xe64c;</a></b></div></footer></main>