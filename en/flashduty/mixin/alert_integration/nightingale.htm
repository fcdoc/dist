<!doctypehtml><meta charset=UTF-8><link rel="alternate" type="application/rss+xml" hreflang="en" href="/en.rss"><link rel=stylesheet href=//registry.npmmirror.com/18x/latest/files/_.css><script src=//registry.npmmirror.com/18x/latest/files/seo.js></script><link rel=alternate href="https://doc.flashduty.com/flashduty/mixin/alert_integration/nightingale" hreflang=x-default><link rel=canonical href="https://doc.flashduty.com/flashduty/mixin/alert_integration/nightingale"><link rel=stylesheet href=//registry.npmmirror.com/18x/latest/files/seo.css><link rel=alternate hreflang=en href="https://doc.flashduty.com/en/flashduty/mixin/alert_integration/nightingale.htm"><link rel=alternate hreflang=zh href="https://doc.flashduty.com/zh/flashduty/mixin/alert_integration/nightingale.htm"><title>Nightingale/Flash Integration</title><main><article><hr /><h2>brief: &gt;-
Push Nightingale (Nightingale/n9e) or Flashcat alert events to Flashduty through webhook. When alert triggers, send
Flashduty sends a trigger event. When the alert is restored, a recovery event is sent to Flashduty</h2><h1>Nightingale/Flash Integration</h1><p>Push Nightingale (Nightingale/n9e) or Flashcat alert events to Flashduty through webhook. When an alert triggers, send a trigger event to Flashduty. When the alert recovers, send a recovery event to Flashduty.</p><h2>Usage Restrictions</h2><h3>In Nightingale:</h3><ul><li>You must have permission to modify <strong>System Configuration =&gt; Global Notifications</strong> or <strong>Alert Management =&gt; Alert Rules</strong>.</li><li>Your Nightingale server must be able to access the domain name api.flascat.cloud and push the alert to the external network.</li></ul><h2>Step 1: Configure Alertmanager</h2><p>This article is suitable for <strong>Nightingale V5 and V6</strong> versions.</p><h2>Operation Steps</h2><h3>In Flashduty</h3><p>You can obtain an integration push address through the following two methods. Choose either one.</p><h4>Use Proprietary Integration</h4><p>When you do not need to route alert events to different collaboration spaces, this method is preferred as it is simpler.</p><p>|+| Expand</p><pre><code>1. Enter the Flashduty console, select **Collaboration Space**, and enter the details page of a specific space
2. Select the **Integrated Data** tab, click **Add an Integration**, and enter the Add Integration page
3. Select **Nightingale/Flashcat** Integration, click **Save** to generate a card.
4. Click on the generated card to view the **push address**, copy it for later use, and complete the setup.
5. (Optional) Click the generated card, click the **Edit** button, select **Console Address**, and enter the Nightingale console address (only the domain part). Flashduty will generate a Nightingale details jump link for the new alert.
</code></pre><h4>Use Shared Integration</h4><p>When you need to route alert events to different collaboration spaces based on the payload information, this method is preferred.</p><p>|+| Expand</p><pre><code>1. Enter the Flashduty console, select **Integration Center =&gt; Alert Events**, and go to the integration selection page.
2. Choose **Nightingale/Flashcat** Integration:
- **Integration Name**: Define a name for the current integration.
- **Console Address**: (Optional) Enter the Nightingale console address (only the domain part). Flashduty will generate a Nightingale details jump link for the new alert.
3. After clicking **Save**, copy the newly generated **push address** on the current page for later use.
4. Click **Create Route** to configure routing rules for the integration. You can match different alerts to different collaboration spaces based on conditions, or you can set a default collaboration space as a fallback and adjust as needed.
5. Complete.
</code></pre><h3>In Nightingale/Flashcat:</h3><p>Choose one of the two configuration methods.</p><h4>Method 1: Configure by Policy</h4><p>Batch select alert rules and configure the webhook.</p><ol><li>Log in to your n9e console, select alert Manage &gt; alert Rules, and enter the alert rule list page</li><li>Select the alert rules you want to import in batches, and select batch update alert rules in the upper right corner</li><li>In the pop-up window, select the &quot;Callback Address&quot; field and enter the integrated push address in the new input box, as shown in the figure below:</li></ol><img alt="drawing" width="600" src="https://fc.3ti.site/zh/flashduty/mixin/alert_integration/nightingale/1.avif" /><ol start="4"><li>Return to the integration list. If the latest event time is displayed, the configuration is successful and the event has been received</li><li>Finish</li></ol><h4>Method 2: Global Configuration</h4><p>Nightingale supports configuring a global webhook address in the page or configuration file to push all alert events. You can choose one of the following two methods.</p><h5>V6 and Above</h5><ol><li>Log in to your n9e console</li><li>Enter __ System Configuration - Notification Settings - Callback Address __ page</li><li>As shown in the figure below, enable a new webhook and enter the integrated push address in the <code>URL</code> field</li></ol><img alt="drawing" width="600" src="https://fc.3ti.site/zh/flashduty/mixin/alert_integration/nightingale/2.avif" /><ol start="4"><li>Finish</li></ol><h5>V5.4 ~ 5.15</h5><ol><li>Log in to your n9e server instance</li><li>Find and open the configuration file, usually etc/server.conf</li><li>Modify the Alerting configuration section and write the Webhook configuration as follows:</li></ol><pre><code class="language-receiver">[Alerting.Webhook]
Enable = true
Url = &quot;{api_host}/event/push/alert/n9e?integration_key=$integration_key&quot;
BasicAuthUser = &quot;&quot;
BasicAuthPass = &quot;&quot;
Timeout = &quot;5s&quot;
Headers = [&quot;Content-Type&quot;, &quot;application/json&quot;, &quot;X-From&quot;, &quot;N9E&quot;]
</code></pre><p>You need to replace the corresponding parameter value of Url with the integrated push address.</p><ol start="4"><li>Save the configuration file</li><li>Restart the n9e server to apply the configuration</li><li>Return to the integration list. If the latest event time is displayed, the configuration is successful and the event has been received</li><li>Finish</li></ol><h2>Severity Mapping Relationship</h2><p>Nightingale/Flashcat to Flashduty Alert Level Mapping:</p><table><thead><tr><th>n9e</th><th>Flashduty</th><th>Status</th></tr></thead><tbody><tr><td>1</td><td>Critical</td><td>High</td></tr><tr><td>2</td><td>Warning</td><td>Average</td></tr><tr><td>3</td><td>Info</td><td>Disaster</td></tr></tbody></table><h2>Frequently Asked Questions</h2><p>|+| Why didn't I receive an alert in Flashduty?</p><pre><code>#### In Flashduty

1. Check if the integration shows the **latest event time**. If not, it means Flashduty did not receive the push, and you should first check the Nightingale part.
2. If you are using **shared integration**, first confirm whether you have configured **routing rules**. Without setting routing rules, the system will directly reject new pushes because there is no collaboration space to handle your alert. In this case, just configure the routing rules to the space you want.

#### In Nightingale/Flashcat:

1. First, confirm whether Nightingale has generated a new alert: Go to **Alert Management =&gt; History Alerts**, and check if a new alert has been generated after configuring the webhook. Note that the new alert status must be **Triggered**. If no new alert is generated, wait for a new alert to be triggered and re-verify.
2. After finding the alert, go to the alert details and view the **Callback Address** section. Verify if the actual callback address matches the integrated push address exactly. If not, modify the **Alert Rule** and re-verify.
3. If they match, you need to log in to the Nightingale server and confirm that it can access the external api.flashcat.cloud domain name. If not, you first need to open an external network for the server, or separately enable external network access for Flashduty's domain name.
4. If there is no network issue, you need to continue troubleshooting the server to see if there are any relevant error logs.

If you still cannot find the root cause of the problem after performing the above steps, please contact us directly.
</code></pre></article><nav><a href="/">doc.flashduty.com</a><a href="/en/flashduty">FlashDuty: One-Stop Alert Response Platform</a></nav><footer><div id="Ft"><b><a class="site" href="//flashcat.cloud"></a><b>Â© FlashCat Cloud</b><b>Site Build By <a class="a" href="https://i18n.site">I18N.SITE</a></b></b><b><a href="//github.com/flashcatcloud">&#xe64c;</a></b></div></footer></main>